<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · Argz</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Argz</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Usage</a><ul class="internal"><li><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li><a class="tocitem" href="#Program-Properties"><span>Program Properties</span></a></li><li><a class="tocitem" href="#Commands"><span>Commands</span></a></li><li><a class="tocitem" href="#Options"><span>Options</span></a></li><li><a class="tocitem" href="#Parsing"><span>Parsing</span></a></li><li><a class="tocitem" href="#Rest-Arguments-and-Normalization"><span>Rest Arguments &amp; Normalization</span></a></li></ul></li><li><a class="tocitem" href="../example/">Example</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dylanxyz/Argz.jl/blob/main/docs/src/usage.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h2><p><strong>Argz</strong> exports a single macro <code>@program</code>, and you can use as following:</p><pre><code class="language-julia hljs">const program = @program begin
    name = &quot;calculator&quot;
    desc = &quot;A simple calculator&quot;
    usage = &quot;calculator &lt;command&gt; &lt;args&gt;... [options]&quot;
    version = v&quot;0.1.0&quot;

    # additional options
    show_help       = true # show help message when the flag &#39;--help|-h&#39; is passed
    show_version    = true # show version message when the flag &#39;--version&#39; is passed
    throw_error     = true # throw errors when invalid options are used
    exit_onhelp     = true # exit when the flag &#39;--help|-h&#39; is passed
    exit_onversion  = true # exit when the flag &#39;--version&#39; is passed
    
    commands = {
        &quot;sum&quot;                       &quot;Returns the sum of &lt;numbers&gt;...&quot;
        &quot;subtract|sub&quot;              &quot;Subtract &lt;numbers&gt;...&quot;
        &quot;multiply|mul&quot;              &quot;Multiply &lt;numbers&gt;...&quot;
        &quot;divide|div&quot;                &quot;Divide two numbers &lt;x&gt; and &lt;y&gt;&quot;
        &quot;power|pow&quot;                 &quot;Raise &lt;x&gt; to the power of &lt;y&gt;&quot;
        &quot;sum mult|m&quot;                &quot;Multiply each &lt;numbers&gt;... and sum the result&quot;
    }

    options = {
        &quot;--help|-h&quot;                 &quot;Show this help message and exit&quot;
        &quot;--version|-v&quot;              &quot;Show version information and exit&quot;
        &quot;--fastmath|-f&quot;             &quot;Use fastmath. (default: false)&quot;
        &quot;--precision &lt;p&gt;&quot;           &quot;Choose float point precision. (default: Float32)&quot;
    }
end</code></pre><p>The input of the <code>@program</code> macro is a <code>block</code> expression.  Each expression within the <code>block</code> must be an assignment  expression <code>=</code>. Names of the defined variables within the <code>block</code> are properties in the resulting <code>program</code>.</p><h2 id="Program-Properties"><a class="docs-heading-anchor" href="#Program-Properties">Program Properties</a><a id="Program-Properties-1"></a><a class="docs-heading-anchor-permalink" href="#Program-Properties" title="Permalink"></a></h2><p>The properties that the program may have are:</p><table><tr><th style="text-align: left">Property</th><th style="text-align: center">Type</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left">name*</td><td style="text-align: center"><code>String</code></td><td style="text-align: left">The name of the program</td></tr><tr><td style="text-align: left">desc</td><td style="text-align: center"><code>String</code></td><td style="text-align: left">The description of the program (default: <code>&quot;&quot;</code>)</td></tr><tr><td style="text-align: left">usage</td><td style="text-align: center"><code>String</code></td><td style="text-align: left">The text that should be displayed in the <em>Usage</em> section of the program&#39;s help message (default: <code>&quot;&quot;</code>)</td></tr><tr><td style="text-align: left">version</td><td style="text-align: center"><code>VersionNumber</code></td><td style="text-align: left">The program&#39;s version to be displayed when the flag <code>--version</code> is used (default: <code>v&quot;0.1.0&quot;</code>)</td></tr><tr><td style="text-align: left">show_help</td><td style="text-align: center"><code>Bool</code></td><td style="text-align: left">Whether or not to display the program&#39;s help message when the flag <code>--help</code> or <code>-h</code> is used (default: <code>true</code>)</td></tr><tr><td style="text-align: left">show_version</td><td style="text-align: center"><code>Bool</code></td><td style="text-align: left">Whether or not to display the program&#39;s version when the flag <code>--version</code> is used (default: <code>true</code>)</td></tr><tr><td style="text-align: left">throw_error</td><td style="text-align: center"><code>Bool</code></td><td style="text-align: left">Raise a <code>Exception</code> when a parsing error occurs, for example when a invalid option is used (default: <code>true</code>)</td></tr><tr><td style="text-align: left">exit_onhelp</td><td style="text-align: center"><code>Bool</code></td><td style="text-align: left">Whether or not to <code>exit</code> the current process when the flag <code>--help</code> or <code>-h</code> is used. (default: <code>true</code>)</td></tr><tr><td style="text-align: left">exit_onversion</td><td style="text-align: center"><code>Bool</code></td><td style="text-align: left">Whether or not to <code>exit</code> the current process when the flag <code>--version</code> is used. (default: <code>true</code>)</td></tr></table><blockquote><p>Properties marked with a <code>*</code> are required.</p></blockquote><p>The properties <code>commands</code> and <code>options</code> are <em>special</em> and are parsed differently from the above properties (explained more below).</p><h2 id="Commands"><a class="docs-heading-anchor" href="#Commands">Commands</a><a id="Commands-1"></a><a class="docs-heading-anchor-permalink" href="#Commands" title="Permalink"></a></h2><p>The syntax for the <code>commands</code> expression is <code>{&quot;cmd&quot; &quot;description&quot;; ...}</code>,  where can be used exactly as a julia <code>matrix</code> literal, where each row  defines a different command with its optional <code>description</code>. The synax  for the <code>command</code> string itself is <code>name[|alias]</code> where name  is the  <code>command</code>&#39;s identifier in the parsing result. Commands can be nested  by separating then with spaces. For example, a  command of <code>ship</code> should  be valid when used as <code>ship x..</code>, a command of <code>ship|sh</code> should be valid  when used as <code>ship x...</code> or <code>sh x...</code>, and a command <code>ship|sh id</code> should  be valid when used as <code>ship id x...</code> or <code>sh id x...</code>.</p><h2 id="Options"><a class="docs-heading-anchor" href="#Options">Options</a><a id="Options-1"></a><a class="docs-heading-anchor-permalink" href="#Options" title="Permalink"></a></h2><p>The syntax of <code>options</code> is very similar to <code>commands</code>, except that the name of a option may start with a <code>-</code> or <code>--</code>, followed by its aliases. By default, every option is considered a flag (ie, a boolean option that does not take any arguments), but you can point out that a particular option should accept an argument, using the syntax <code>--option[|-o] &lt;arg&gt;</code>, the option string should start with its <em>long</em> form (<code>--option</code>, for example) and may be optionally followed  its shorter form (<code>-o</code>, for example) and also <code>&lt;arg&gt;</code> if the option should accept any arguments. Notice that the name of the argument between <code>&lt;</code> and <code>&gt;</code> does not matter, as the value should be identified by the <code>option</code>&#39;s <em>long</em> (or <em>short</em>) form in the parsing result.</p><h2 id="Parsing"><a class="docs-heading-anchor" href="#Parsing">Parsing</a><a id="Parsing-1"></a><a class="docs-heading-anchor-permalink" href="#Parsing" title="Permalink"></a></h2><p>The <code>@program</code> macro defines two functions: <code>help()</code>, that should be used to retrieve the <code>program</code>&#39;s <strong>help</strong> message, and <code>parseargs</code> that should be used to actually <em>parse</em> the provided arguments. The resulting expression of the macro itself is a <code>NamedTuple</code> where each field is a <a href="#Program-Properties">property</a> of the <code>program</code>.</p><pre><code class="language-julia hljs">command, args, options, flags = parseargs()</code></pre><ul><li><p><code>command</code> is the command passed or a empty string if no command was detected. Nested commands are joined with a <code>.</code> character.</p></li><li><p><code>args</code> is the remaining arguments (not command nor option nor flag).</p></li><li><p><code>options</code> is a <code>Dict</code> that stores each (non-boolean) <code>option</code> with its associated <code>value</code>.</p></li><li><p><code>flags</code> is a <code>Vector</code> that stores each flag used.</p></li></ul><p>By default, <code>parseargs</code> will use the normalized version of <code>ARGS</code>, but you can pass custom arguments as a <code>Vector{String}</code>.</p><h2 id="Rest-Arguments-and-Normalization"><a class="docs-heading-anchor" href="#Rest-Arguments-and-Normalization">Rest Arguments &amp; Normalization</a><a id="Rest-Arguments-and-Normalization-1"></a><a class="docs-heading-anchor-permalink" href="#Rest-Arguments-and-Normalization" title="Permalink"></a></h2><p>Sometimes is useful for a <code>program</code> to parse an <code>argument</code> starting with a <code>-</code> followed by multiple characters as multiple flags joined together. For example, <code>-abc</code> should be equivalent to <code>-a -b -c</code>. Is also useful to accept options initialized with a <code>=</code> character followed by their value. For example, <code>--foo=bar</code> should be equivalent to <code>--foo bar</code>. Argz exports a helper function called <code>normargs</code> that accomplish this task.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; join(normargs([&quot;-f&quot;, &quot;-xyz&quot;, &quot;--foo&quot;, &quot;--precision=value&quot;]), &quot; &quot;)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;-f -x -y -z --foo --precision value&quot;</code></pre><p>Arguments located after <code>--</code> are ignored:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; join(Argz.normargs([&quot;-f&quot;, &quot;-xyz&quot;, &quot;--&quot;, &quot;-abc&quot;, &quot;--foo&quot;, &quot;--precision=value&quot;]), &quot; &quot;)</code><code class="nohighlight hljs ansi" style="display:block;">&quot;-f -x -y -z -- -abc --foo --precision=value&quot;</code></pre><p>Sometimes a <code>program</code> may accept additional arguments and options and then pass it to another program, generally these arguments and  options are placed after a special argument <code>--</code>. Argz treats options and flags placed after <code>--</code> as normal arguments.</p><blockquote><p>Note that the special argument <code>--</code> is not excluded  from the resulting <code>args</code> array.</p></blockquote></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../example/">Example »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Thursday 16 June 2022 10:54">Thursday 16 June 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
